<?xml version="1.0" ?>
<sdf version="1.8">
  <model name="arm3dof">
    <static>false</static>
    
    <joint name="world_fixed" type="fixed">
      <parent>world</parent>
      <child>base_link</child>
    </joint>

    <link name="base_link">
      <pose>0 0 0.05 0 0 0</pose>
      <inertial>
        <mass>50.0</mass>
        <inertia><ixx>1.0</ixx><iyy>1.0</iyy><izz>1.0</izz></inertia>
      </inertial>
      <visual name="base_vis">
        <geometry><box><size>0.2 0.2 0.1</size></box></geometry>
        <material><diffuse>0.1 0.1 0.1 1</diffuse></material>
      </visual>
      <collision name="base_col"><geometry><box><size>0.2 0.2 0.1</size></box></geometry></collision>
    </link>

    <joint name="j1_base_yaw" type="revolute">
      <parent>base_link</parent>
      <child>link_1</child>
      <axis>
        <xyz>0 0 1</xyz>
        <limit><lower>-3.14</lower><upper>3.14</upper></limit>
        <dynamics><damping>10.0</damping><friction>5.0</friction></dynamics>
      </axis>
    </joint>

    <link name="link_1">
      <pose>0 0 0.35 0 0 0</pose>
      <inertial>
        <mass>5.0</mass>
        <inertia><ixx>0.2</ixx><iyy>0.2</iyy><izz>0.05</izz></inertia>
      </inertial>
      <visual name="l1_vis">
        <geometry><box><size>0.05 0.05 0.5</size></box></geometry>
        <material><diffuse>0.2 0.6 1.0 1</diffuse></material>
      </visual>
      <visual name="l1_joint_vis">
        <pose>0 0 0.25 0 0 0</pose>
        <geometry><sphere><radius>0.06</radius></sphere></geometry>
        <material><diffuse>0.1 0.1 0.1 1</diffuse></material>
      </visual>
      <collision name="l1_col"><geometry><box><size>0.05 0.05 0.5</size></box></geometry></collision>
    </link>

    <joint name="j2_shoulder" type="revolute">
      <parent>link_1</parent>
      <child>link_2</child>
      <pose>0 0 -0.2 0 0 0</pose> 
      <axis>
        <xyz>0 1 0</xyz>
        <limit><lower>-1.57</lower><upper>1.57</upper></limit>
        <dynamics><damping>10.0</damping><friction>5.0</friction></dynamics>
      </axis>
    </joint>

    <link name="link_2">
      <pose>0 0 0.80 0 0 0</pose> 
      <inertial>
        <mass>3.0</mass>
        <inertia><ixx>0.1</ixx><iyy>0.1</iyy><izz>0.01</izz></inertia>
      </inertial>
      <visual name="l2_vis">
        <geometry><box><size>0.04 0.04 0.4</size></box></geometry>
        <material><diffuse>0.2 0.6 1.0 1</diffuse></material>
      </visual>
      <visual name="l2_joint_vis">
        <pose>0 0 -0.2 0 0 0</pose>
        <geometry><sphere><radius>0.05</radius></sphere></geometry>
        <material><diffuse>0.1 0.1 0.1 1</diffuse></material>
      </visual>
      <collision name="l2_col"><geometry><box><size>0.04 0.04 0.4</size></box></geometry></collision>
    </link>

    <joint name="j3_elbow" type="revolute">
      <parent>link_2</parent>
      <child>link_3</child>
      <pose>0 0 -0.1 0 0 0</pose>
      <axis>
        <xyz>0 1 0</xyz>
        <limit><lower>-1.57</lower><upper>1.57</upper></limit>
        <dynamics><damping>5.0</damping><friction>5.0</friction></dynamics>
      </axis>
    </joint>

    <link name="link_3">
       <pose>0 0 1.10 0 0 0</pose>
       <inertial>
         <mass>1.0</mass>
         <inertia><ixx>0.05</ixx><iyy>0.05</iyy><izz>0.005</izz></inertia>
       </inertial>
       <visual name="l3_vis">
         <geometry><box><size>0.03 0.03 0.2</size></box></geometry>
         <material><diffuse>0.2 0.6 1.0 1</diffuse></material>
       </visual>
       <visual name="l3_joint_vis">
        <pose>0 0 -0.1 0 0 0</pose>
        <geometry><sphere><radius>0.04</radius></sphere></geometry>
        <material><diffuse>0.1 0.1 0.1 1</diffuse></material>
       </visual>
    </link>

    <plugin filename="gz-sim-joint-position-controller-system" name="gz::sim::systems::JointPositionController">
      <joint_name>j1_base_yaw</joint_name>
      <topic>/arm/j1/cmd_pos</topic>
      <p_gain>800</p_gain>
      <i_gain>0.0</i_gain> <d_gain>50</d_gain> 
    </plugin>

    <plugin filename="gz-sim-joint-position-controller-system" name="gz::sim::systems::JointPositionController">
      <joint_name>j2_shoulder</joint_name>
      <topic>/arm/j2/cmd_pos</topic>
      <p_gain>1500</p_gain>
      <i_gain>0.0</i_gain> <d_gain>100</d_gain>
    </plugin>

    <plugin filename="gz-sim-joint-position-controller-system" name="gz::sim::systems::JointPositionController">
      <joint_name>j3_elbow</joint_name>
      <topic>/arm/j3/cmd_pos</topic>
      <p_gain>800</p_gain>
      <i_gain>0.0</i_gain> <d_gain>30</d_gain>
    </plugin>

  </model>
</sdf>